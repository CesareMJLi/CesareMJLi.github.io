<!DOCTYPE html>
<html style="display: none;" lang="en">
    <head>
    <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
    <!--
        © Material Theme
        https://github.com/viosey/hexo-theme-material
        Version: 1.5.2 -->
    <script>
        window.materialVersion = "1.5.2"
        // Delete localstorage with these tags
        window.oldVersion = [
            'codestartv1',
            '1.3.4',
            '1.4.0',
            '1.4.0b1',
            '1.5.0'
        ]
    </script>

    <!-- dns prefetch -->
    <meta http-equiv="x-dns-prefetch-control" content="on">














    <!-- Meta & Info -->
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="renderer" content="webkit">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!-- Title -->
    
    <title>
        
            Design Pattern/设计模式: Part III | 
        
        Cesare&#39;s Workshop
    </title>

    <!-- Favicons -->
    <link rel="icon shortcut" type="image/ico" href="/img/star.png">
    <link rel="icon" href="/img/star.png">

    <meta name="format-detection" content="telephone=no"/>
    <meta name="description" itemprop="description" content="Graduate with double degrees of Tongji University and Polytechnic of Milan. Now doing master in Europe.:)">
    <meta name="keywords" content=",Design Pattern">
    <meta name="theme-color" content="#0097A7">

    <!-- Disable Fucking Bloody Baidu Tranformation -->
    <meta http-equiv="Cache-Control" content="no-transform" />
    <meta http-equiv="Cache-Control" content="no-siteapp" />

    <!--[if lte IE 9]>
        <link rel="stylesheet" href="/css/ie-blocker.css">

        
            <script src="/js/ie-blocker.en.js"></script>
        
    <![endif]-->

    <!-- Import lsloader -->
    <script>(function(){window.lsloader={jsRunSequence:[],jsnamemap:{},cssnamemap:{}};lsloader.removeLS=function(a){try{localStorage.removeItem(a)}catch(b){}};lsloader.setLS=function(a,c){try{localStorage.setItem(a,c)}catch(b){}};lsloader.getLS=function(a){var c="";try{c=localStorage.getItem(a)}catch(b){c=""}return c};versionString="/*"+(window.materialVersion||"unknownVersion")+"*/";lsloader.clean=function(){try{var b=[];for(var a=0;a<localStorage.length;a++){b.push(localStorage.key(a))}b.forEach(function(e){var f=lsloader.getLS(e);if(window.oldVersion){var d=window.oldVersion.reduce(function(g,h){return g||f.indexOf("/*"+h+"*/")!==-1},false);if(d){lsloader.removeLS(e)}}})}catch(c){}};lsloader.clean();lsloader.load=function(f,a,b,d){if(typeof b==="boolean"){d=b;b=undefined}d=d||false;b=b||function(){};var e;e=this.getLS(f);if(e&&e.indexOf(versionString)===-1){this.removeLS(f);this.requestResource(f,a,b,d);return}if(e){var c=e.split(versionString)[0];if(c!=a){console.log("reload:"+a);this.removeLS(f);this.requestResource(f,a,b,d);return}e=e.split(versionString)[1];if(d){this.jsRunSequence.push({name:f,code:e});this.runjs(a,f,e)}else{document.getElementById(f).appendChild(document.createTextNode(e));b()}}else{this.requestResource(f,a,b,d)}};lsloader.requestResource=function(b,e,a,c){var d=this;if(c){this.iojs(e,b,function(h,f,g){d.setLS(f,h+versionString+g);d.runjs(h,f,g)})}else{this.iocss(e,b,function(f){document.getElementById(b).appendChild(document.createTextNode(f));d.setLS(b,e+versionString+f)},a)}};lsloader.iojs=function(d,b,g){var a=this;a.jsRunSequence.push({name:b,code:""});try{var f=new XMLHttpRequest();f.open("get",d,true);f.onreadystatechange=function(){if(f.readyState==4){if((f.status>=200&&f.status<300)||f.status==304){if(f.response!=""){g(d,b,f.response);return}}a.jsfallback(d,b)}};f.send(null)}catch(c){a.jsfallback(d,b)}};lsloader.iocss=function(f,c,h,a){var b=this;try{var g=new XMLHttpRequest();g.open("get",f,true);g.onreadystatechange=function(){if(g.readyState==4){if((g.status>=200&&g.status<300)||g.status==304){if(g.response!=""){h(g.response);a();return}}b.cssfallback(f,c,a)}};g.send(null)}catch(d){b.cssfallback(f,c,a)}};lsloader.iofonts=function(f,c,h,a){var b=this;try{var g=new XMLHttpRequest();g.open("get",f,true);g.onreadystatechange=function(){if(g.readyState==4){if((g.status>=200&&g.status<300)||g.status==304){if(g.response!=""){h(g.response);a();return}}b.cssfallback(f,c,a)}};g.send(null)}catch(d){b.cssfallback(f,c,a)}};lsloader.runjs=function(f,c,e){if(!!c&&!!e){for(var b in this.jsRunSequence){if(this.jsRunSequence[b].name==c){this.jsRunSequence[b].code=e}}}if(!!this.jsRunSequence[0]&&!!this.jsRunSequence[0].code&&this.jsRunSequence[0].status!="failed"){var a=document.createElement("script");a.appendChild(document.createTextNode(this.jsRunSequence[0].code));a.type="text/javascript";document.getElementsByTagName("head")[0].appendChild(a);this.jsRunSequence.shift();if(this.jsRunSequence.length>0){this.runjs()}}else{if(!!this.jsRunSequence[0]&&this.jsRunSequence[0].status=="failed"){var d=this;var a=document.createElement("script");a.src=this.jsRunSequence[0].path;a.type="text/javascript";this.jsRunSequence[0].status="loading";a.onload=function(){d.jsRunSequence.shift();if(d.jsRunSequence.length>0){d.runjs()}};document.body.appendChild(a)}}};lsloader.tagLoad=function(b,a){this.jsRunSequence.push({name:a,code:"",path:b,status:"failed"});this.runjs()};lsloader.jsfallback=function(c,b){if(!!this.jsnamemap[b]){return}else{this.jsnamemap[b]=b}for(var a in this.jsRunSequence){if(this.jsRunSequence[a].name==b){this.jsRunSequence[a].code="";this.jsRunSequence[a].status="failed";this.jsRunSequence[a].path=c}}this.runjs()};lsloader.cssfallback=function(e,c,b){if(!!this.cssnamemap[c]){return}else{this.cssnamemap[c]=1}var d=document.createElement("link");d.type="text/css";d.href=e;d.rel="stylesheet";d.onload=d.onerror=b;var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(d,a)};lsloader.runInlineScript=function(c,b){var a=document.getElementById(b).innerText;this.jsRunSequence.push({name:c,code:a});this.runjs()}})();</script>

    <!-- Import queue -->
    <script>function Queue(){this.dataStore=[];this.offer=b;this.poll=d;this.execNext=a;this.debug=false;this.startDebug=c;function b(e){if(this.debug){console.log("Offered a Queued Function.")}if(typeof e==="function"){this.dataStore.push(e)}else{console.log("You must offer a function.")}}function d(){if(this.debug){console.log("Polled a Queued Function.")}return this.dataStore.shift()}function a(){var e=this.poll();if(e!==undefined){if(this.debug){console.log("Run a Queued Function.")}e()}}function c(){this.debug=true}}var queue=new Queue();</script>

    <!-- Import CSS -->
    
        <style id="material_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("material_css","/css/material.min.css?Z7a72R1E4SxzBKR/WGctOA==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>
        <style id="style_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("style_css","/css/style.min.css?MKetZV3cUTfDxvMffaOezg==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>

        
            
                <style id="prettify_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("prettify_css","/css/prettify.min.css?zp8STOU9v89XWFEnN+6YmQ==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>
                <style id="prettify_theme"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("prettify_theme","/css/prettify/vibrant-ink.min.css?e5E/qqGcGveS7VTH4M896w==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>
            
        

    

    

    <!-- Config CSS -->

<!-- Other Styles -->
<style>
  body, html {
    font-family: Roboto, "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "微软雅黑", Arial, sans-serif;
    overflow-x: hidden !important;
  }
  
  code {
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  }

  a {
    color: #00838F;
  }

  .mdl-card__media,
  #search-label,
  #search-form-label:after,
  #scheme-Paradox .hot_tags-count,
  #scheme-Paradox .sidebar_archives-count,
  #scheme-Paradox .sidebar-colored .sidebar-header,
  #scheme-Paradox .sidebar-colored .sidebar-badge{
    background-color: #0097A7 !important;
  }

  /* Sidebar User Drop Down Menu Text Color */
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:hover,
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:focus {
    color: #0097A7 !important;
  }

  #post_entry-right-info,
  .sidebar-colored .sidebar-nav li:hover > a,
  .sidebar-colored .sidebar-nav li:hover > a i,
  .sidebar-colored .sidebar-nav li > a:hover,
  .sidebar-colored .sidebar-nav li > a:hover i,
  .sidebar-colored .sidebar-nav li > a:focus i,
  .sidebar-colored .sidebar-nav > .open > a,
  .sidebar-colored .sidebar-nav > .open > a:hover,
  .sidebar-colored .sidebar-nav > .open > a:focus,
  #ds-reset #ds-ctx .ds-ctx-entry .ds-ctx-head a {
    color: #0097A7 !important;
  }

  .toTop {
    background: #757575 !important;
  }

  .material-layout .material-post>.material-nav,
  .material-layout .material-index>.material-nav,
  .material-nav a {
    color: #757575;
  }

  #scheme-Paradox .MD-burger-layer {
    background-color: #757575;
  }

  #scheme-Paradox #post-toc-trigger-btn {
    color: #757575;
  }

  .post-toc a:hover {
    color: #00838F;
    text-decoration: underline;
  }

</style>


<!-- Theme Background Related-->

    <style>
      body{
        background-color: #F5F5F5;
      }

      /* blog_info bottom background */
      #scheme-Paradox .material-layout .something-else .mdl-card__supporting-text{
        background-color: #fff;
      }
    </style>




<!-- Fade Effect -->

    <style>
      .fade {
        transition: all 800ms linear;
        -webkit-transform: translate3d(0,0,0);
        -moz-transform: translate3d(0,0,0);
        -ms-transform: translate3d(0,0,0);
        -o-transform: translate3d(0,0,0);
        transform: translate3d(0,0,0);
        opacity: 1;
      }

      .fade.out{
        opacity: 0;
      }
    </style>


<!-- Import Font -->
<!-- Import Roboto -->

    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet">


<!-- Import Material Icons -->


    <style id="material_icons"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("material_icons","/css/material-icons.css?pqhB/Rd/ab0H2+kZp0RDmw==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>




    <!-- Import jQuery -->
    
        <script>lsloader.load("jq_js","/js/jquery.min.js?qcusAULNeBksqffqUM2+Ig==", true)</script>
    

    <!-- WebAPP Icons -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="application-name" content="Cesare&#39;s Workshop">
    <meta name="msapplication-starturl" content="http://yoursite.com/2020/02/01/Design-Pattern-设计模式-Part-III/">
    <meta name="msapplication-navbutton-color" content="#0097A7">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="Cesare&#39;s Workshop">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon" href="/img/star.png">

    <!-- Site Verification -->
    
    

    <!-- RSS -->
    

    <!-- The Open Graph protocol -->
    <meta property="og:url" content="http://yoursite.com/2020/02/01/Design-Pattern-设计模式-Part-III/">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="Design Pattern/设计模式: Part III | Cesare&#39;s Workshop">
    <meta property="og:image" content="/img/star.png">
    <meta property="og:description" content="Graduate with double degrees of Tongji University and Polytechnic of Milan. Now doing master in Europe.:)">
    <meta property="og:article:tag" content="Design Pattern"> 

    
        <meta property="article:published_time" content="Sat Feb 01 2020 08:38:55 GMT+0100">
        <meta property="article:modified_time" content="Sat Feb 01 2020 08:57:07 GMT+0100">
    

    <!-- The Twitter Card protocol -->
    <meta name="twitter:card" content="summary_large_image">

    <!-- Add canonical link for SEO -->
    
        <link rel="canonical" href="http://yoursite.com/2020/02/01/Design-Pattern-设计模式-Part-III/index.html" />
    

    <!-- Structured-data for SEO -->
    
        


<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "mainEntityOfPage": "http://yoursite.com/2020/02/01/Design-Pattern-设计模式-Part-III/index.html",
    "headline": "Design Pattern/设计模式: Part III",
    "datePublished": "Sat Feb 01 2020 08:38:55 GMT+0100",
    "dateModified": "Sat Feb 01 2020 08:57:07 GMT+0100",
    "author": {
        "@type": "Person",
        "name": "Cesare (MINGJU LI)",
        "image": {
            "@type": "ImageObject",
            "url": "/img/cesare.jpg"
        },
        "description": "Each question has an answer.,Or, will have an answer."
    },
    "publisher": {
        "@type": "Organization",
        "name": "Cesare&#39;s Workshop",
        "logo": {
            "@type":"ImageObject",
            "url": "/img/star.png"
        }
    },
    "keywords": ",Design Pattern",
    "description": "Graduate with double degrees of Tongji University and Polytechnic of Milan. Now doing master in Europe.:)",
}
</script>


    

    <!-- Analytics -->
    
    
    

    <!-- Custom Head -->
    

<link rel="stylesheet" href="/css/prism-duotone-space.css" type="text/css"><script src="/js/prism.js"></script><!-- hexo-inject:begin --><!-- hexo-inject:end --></head>


    
        <body id="scheme-Paradox" class="lazy">
            <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="material-layout  mdl-js-layout has-drawer is-upgraded">
                

                <!-- Main Container -->
                <main class="material-layout__content" id="main">

                    <!-- Top Anchor -->
                    <div id="top"></div>

                    
                        <!-- Hamburger Button -->
                        <button class="MD-burger-icon sidebar-toggle">
                            <span class="MD-burger-layer"></span>
                        </button>
                    

                    <!-- Post TOC -->

    
    <!-- Back Button -->
    <!--
    <div class="material-back" id="backhome-div" tabindex="0">
        <a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon"
           href="#" onclick="window.history.back();return false;"
           target="_self"
           role="button"
           data-upgraded=",MaterialButton,MaterialRipple">
            <i class="material-icons" role="presentation">arrow_back</i>
            <span class="mdl-button__ripple-container">
                <span class="mdl-ripple"></span>
            </span>
        </a>
    </div>
    -->


    <!-- Left aligned menu below button -->
    
    
    <button id="post-toc-trigger-btn"
        class="mdl-button mdl-js-button mdl-button--icon">
        <i class="material-icons">format_list_numbered</i>
    </button>

    <ul class="post-toc-wrap mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect" for="post-toc-trigger-btn" style="max-height:80vh; overflow-y:scroll;">
        <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#设计模式以及综述"><span class="post-toc-number">1.</span> <span class="post-toc-text">设计模式以及综述</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#Chapter-5-Singleton模式–只有一个实例"><span class="post-toc-number">2.</span> <span class="post-toc-text">Chapter 5: Singleton模式–只有一个实例</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#Chapter-6-Prototype模式–通过复制生成实例"><span class="post-toc-number">3.</span> <span class="post-toc-text">Chapter 6: Prototype模式–通过复制生成实例</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#登场角色"><span class="post-toc-number">3.1.</span> <span class="post-toc-text">登场角色</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#Chapter-7-Builder模式–组装复杂的实例"><span class="post-toc-number">4.</span> <span class="post-toc-text">Chapter 7: Builder模式–组装复杂的实例</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#登场角色-1"><span class="post-toc-number">4.1.</span> <span class="post-toc-text">登场角色</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#Chapter-8-Abstract-Factory模式—将关联零件组装成产品"><span class="post-toc-number">5.</span> <span class="post-toc-text">Chapter 8: Abstract Factory模式—将关联零件组装成产品</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#扮演角色"><span class="post-toc-number">5.1.</span> <span class="post-toc-text">扮演角色</span></a></li></ol></li></ol>
    </ul>
    




<!-- Layouts -->

    <!-- Post Module -->
    <div class="material-post_container">

        <div class="material-post mdl-grid">
            <div class="mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col">

                <!-- Post Header(Thumbnail & Title) -->
                
    <!-- Paradox Post Header -->
    
        
            <!-- Random Thumbnail -->
            <div class="post_thumbnail-random mdl-card__media mdl-color-text--grey-50">
            <script type="text/ls-javascript" id="post-thumbnail-script">
    var randomNum = Math.floor(Math.random() * 19 + 1);

    $('.post_thumbnail-random').attr('data-original', '/img/random/material-' + randomNum + '.png');
    $('.post_thumbnail-random').addClass('lazy');
</script>

        
    
            <p class="article-headline-p">
                Design Pattern/设计模式: Part III
            </p>
        </div>





                
                    <!-- Paradox Post Info -->
                    <div class="mdl-color-text--grey-700 mdl-card__supporting-text meta">

    <!-- Author Avatar -->
    <div id="author-avatar">
        <img src="/img/cesare.jpg" width="44px" height="44px" alt="Author Avatar"/>
    </div>
    <!-- Author Name & Date -->
    <div>
        <strong>Cesare (MINGJU LI)</strong>
        <span>Feb 01, 2020</span>
    </div>

    <div class="section-spacer"></div>

    <!-- Favorite -->
    <!--
        <button id="article-functions-like-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon btn-like">
            <i class="material-icons" role="presentation">favorite</i>
            <span class="visuallyhidden">favorites</span>
        </button>
    -->

    <!-- Qrcode -->
    

    <!-- Tags (bookmark) -->
    
    <button id="article-functions-viewtags-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
        <i class="material-icons" role="presentation">bookmark</i>
        <span class="visuallyhidden">bookmark</span>
    </button>
    <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-viewtags-button">
        <li class="mdl-menu__item">
        <a class="post_tag-link" href="/tags/Design-Pattern/">Design Pattern</a>
    </ul>
    

    <!-- Share -->
    
        <button id="article-fuctions-share-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">share</i>
    <span class="visuallyhidden">share</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-fuctions-share-button">
    

    

    <!-- Share Weibo -->
    
        <a class="post_share-link" href="http://service.weibo.com/share/share.php?appkey=&title=Design Pattern/设计模式: Part III&url=http://yoursite.com/2020/02/01/Design-Pattern-设计模式-Part-III/index.html&pic=http://yoursite.com/img/star.png&searchPic=false&style=simple" target="_blank">
            <li class="mdl-menu__item">
                Share to Weibo
            </li>
        </a>
    

    <!-- Share Twitter -->
    
        <a class="post_share-link" href="https://twitter.com/intent/tweet?text=Design Pattern/设计模式: Part III&url=http://yoursite.com/2020/02/01/Design-Pattern-设计模式-Part-III/index.html&via=Cesare (MINGJU LI)" target="_blank">
            <li class="mdl-menu__item">
                Share to Twitter
            </li>
        </a>
    

    <!-- Share Facebook -->
    
        <a class="post_share-link" href="https://www.facebook.com/sharer/sharer.php?u=http://yoursite.com/2020/02/01/Design-Pattern-设计模式-Part-III/index.html" target="_blank">
            <li class="mdl-menu__item">
                Share to Facebook
            </li>
        </a>
    

    <!-- Share Google+ -->
    
        <a class="post_share-link" href="https://plus.google.com/share?url=http://yoursite.com/2020/02/01/Design-Pattern-设计模式-Part-III/index.html" target="_blank">
            <li class="mdl-menu__item">
                Share to Google+
            </li>
        </a>
    

    <!-- Share LinkedIn -->
    

    <!-- Share QQ -->
    

    <!-- Share Telegram -->
    
</ul>

    
</div>

                

                <!-- Post Content -->
                <div id="post-content" class="mdl-color-text--grey-700 mdl-card__supporting-text fade out">
    
        <h1 id="设计模式以及综述"><a href="#设计模式以及综述" class="headerlink" title="设计模式以及综述"></a>设计模式以及综述</h1><p>设计模式对于一名软件开发工程师来说可谓是必备的技能和知识，然而在程序员社区中也充斥着不少对于设计模式的反对之音。有人认为设计模式的知识对于工程开发至关重要，但也有许多经验丰富的程序员认为设计模式应当是长期的软件开发的积累所留下的不可名状的抽象艺术，对于市面上不少介绍设计模式的书籍嗤之以鼻。</p>
<p>对于刚入门的软件开发工程师而言，你若问他（包括现在的我自己）“我们为什么要使用工厂模式？使用工厂模式能够带来什么好处？”之类的问题，他也是很难回答的。所以盲目的掌握设计模式中那些拗口的名称，或者干巴巴的“方便继承”之类的描述是没有意义的。</p>
<p>这一系列的博客的目的并不是一蹴而就的讲解全部的设计模式知识，这样的知识没有日积月累的开发经验是很难去对其有深入的体会的。我只是希望能在这一系列的博客中，借助《图解设计模式》一书，跟随书中的顺序对其中的设计模式知识进行某种程度的理解和总结，以至于能够对诸君有所启迪，开发出更加优美和友好的代码。</p>
<p>我的能力有限，若是文中出现什么谬误也请诸君不吝赐教，提前感谢。</p>
<p>《图解设计模式》一书的作者是<strong>结城浩</strong>先生，全书共计十个部分，预计会分为十篇博客进行介绍。书中的代码为java所写，虽然java并不是我比较擅长的代码，但是为了不引起错误贻笑大方，所以还是按照书中的java进行讨论。本博客介绍其中的<em>第三部分：生成实例</em>。因为每一章节中代码都占据了比较多的部分，为了更好地理解相关概念，建议阅读代码优先从Main.java的部分开始。</p>
<h1 id="Chapter-5-Singleton模式–只有一个实例"><a href="#Chapter-5-Singleton模式–只有一个实例" class="headerlink" title="Chapter 5: Singleton模式–只有一个实例"></a>Chapter 5: Singleton模式–只有一个实例</h1><p>在软件工程中，我们经常会希望在整个程序中确保某些实例有且只有一个。当然了，我们可以寄希望于我们在编程中只调用了一次new MyClass()以达到只生成一个实例的目的。显然这样的方法是不够保险的，我们对于这个实例有如下的要求</p>
<blockquote>
<p>确保任何情况下都绝对只有一个实例</p>
</blockquote>
<p>那么像这样的模式，我们可以称之为Singleton模式。这里因为这个模式的概念比较简单，我们就不使用例子而直接查看代码。</p>
<pre><code>// Singleton.java
public class Singleton{
    private static Singleton singleton = new Singleton();
    private Singleton(){
        System.out.println(&quot;The Singleton is generated&quot;);
    }
    public static Singleton getInstance(){
        return singleton;
    }
}
// 这里的Singleton可以说是最简单的Singleton模型了，其中private的singleton属性和Singleton构造函数都是必须的，而getInstance可以根据实际的需要去进行改造。这里蕴含的这里很简单：Singleton类的构造函数是private的，那么从外部则无法调用此构造函数，即不能进行new Singleton()这样的调用，否则会出现编译错误。而在加载这个类的时候，static字段的singleton被初始化为Singleton类的实例，也是整个程序中有且只有的唯一的实例。
</code></pre><blockquote>
<p>Static关键字：仅仅在该类被加载时进行一次。</p>
</blockquote>
<pre><code>// Main.java
public class Main{
    public static void main(String[] args){
        System.out.println(&quot;Start&quot;);
        Singleton obj1 = Singleton.getInstance();
        Singleton obj2 = Singleton.getInstance();
        if (obj1==obj2){
            System.out.println(&quot;obj1 and obj2 are same instance&quot;);
        }else{
            System.out.println(&quot;obj1 and obj2 are NOT same instance&quot;);
        }
        System.out.println(&quot;End&quot;);
    }
}
</code></pre><p>Main.java的输出如下所示</p>
<pre><code>Start
The Singleton is generated
obj1 and obj2 are same instance
End
</code></pre><p>注意程序的输出，在输出“Start”之后就输出了“The Singleton is generated”，在第一次调用getInstance方法时，Singleton类被初始化，也是这个时候，static字段singleton被初始化，生成了唯一的一个实例。</p>
<p>当然，刚刚这一例子仅仅是Singleton模式在java下最简单的一个实现，事实上在多线程的情况下，或者在其他的语言的实现中，Singleton模式都可能会有一些差异，但是就像是在最开始强调的，这一系列的博客的目的并非是上手一门语言，而是去理解为什么要这么做、以及如果要这么做的话可以通过限定private之类的方式进行。</p>
<h1 id="Chapter-6-Prototype模式–通过复制生成实例"><a href="#Chapter-6-Prototype模式–通过复制生成实例" class="headerlink" title="Chapter 6: Prototype模式–通过复制生成实例"></a>Chapter 6: Prototype模式–通过复制生成实例</h1><p>生成实例？我们脑海里第一浮现的应该是new MyClass()这样的方式，然而在某些情况下，我们需要<strong>在不指定类名的前提下生成实例</strong>，一些比较常见的情况下被列举如下：</p>
<ol>
<li>对象种类繁多，无法将其整合到一个类中</li>
<li>难以根据类来生成实例</li>
<li>解耦框架与生成的实例：我们希望要生成的实例和这里负责生成的框架是低耦合的</li>
</ol>
<p>对于上述的若干种情况，我们可以通过Prototype模式来解决这个问题，根据实例来生成新的实例。在java语言中，我们可以使用clone来创建实例的副本，在这一章节我们就学习clone方法和Cloneable接口的使用方法。</p>
<blockquote>
<p>例：我们希望设计一段程序，输入字符串，输出为<strong>方框中的字符串</strong>或者<strong>加了下划线的字符串</strong>。程序的结构如下所示</p>
</blockquote>
<img src="/2020/02/01/Design-Pattern-设计模式-Part-III/1.png">
<pre><code>// Product.java：Product接口
package framework;
public interface Product extends Cloneable{
    public abstract void use(String s);
    public abstract Product createClone();
}
//这里Product继承了java.lang.Cloneable接口，实现了此接口的实例可以调用clone方法来自动复制实例
//use方法是“使用”的方法，具体怎么使用交给子类进行实现
// createClone方法是用于复制实例的方法
</code></pre><pre><code>// Manager.java: Manager类
package framework;
import java.util.*;

public class Manager{
    private HashMap showcase = new Hashmap();
    //showcase属性保存了名字和实例之间的对应关系
    public void register(String name, Product proto){
        showcase.put(name, proto);
        //尽管我们还不知道proto是属于哪一个类的实例，但是我们确定一点，那就是每一个proto都实现了Product接口
        //在这一步将接收到的一对name和proto放进Hashmap中
    }
    public Product create(String protoname){
        Product p = (Product)showcase.get(protoname);
        return p.createClone;
    }
}
//这里Manager类使用Product接口来复制实例（Product接口是Manager类和其他的具体类之间的桥梁），但不管是Manager.java还是Product.java中都没有出现过关于MessageBox类和UnderlinePen类的名字，这就意味着这些组件之间的耦合关系是相当松弛的，我们可以独立的修改Product/Manager而不受MessageBox/UnderlinePen的影响。
</code></pre><pre><code>// MessageBox.java: MessageBox类，实现了Product接口

import framework.*;

public class MessageBox implements Product{
    private char decochar;
    //使用decochar字符来组成MessageBox

    public MessageBox(char decochar){
        this.decochar = decochar;
    }

    public void use(String s){
        int length = s.getBytes().length;
        for(int i=0;i&lt;length+4;i++){
            System.out.print(decochar);
        }
        System.out.println(&quot;&quot;);
        System.out.println(decochar+&quot; &quot;+s+&quot; &quot;+decochar);
        for(int i=0;i&lt;length+4;i++){
            System.out.print(decochar);
        }
        System.out.println(&quot;&quot;);
    }
    //使用use方法来输出特定格式

    public Product createClone(){
        Product p = null;
        try{
            p = (Product)clone();
            //clone()是Java中定义的方法，用于复制自身。之所以可以调用clone()，是因为该类实现了java.lang.Cloneable接口（Product接口继承了Cloneable接口），如果没有实现这个接口会抛出CloneNotSupportedException异常
            //注意，java.lang.Cloneale接口只是告诉程序可以调用clone()，它自身并没有定义任何方法，只有类自己（或它的子类）能够调用java中的clone方法，当其他类要求复制实例时需要调用createClone这样的方阿飞，然后在内部调用clone方法
        }catch(CloneNotSupportedException e){
            e.printStackTrace();
        }
        return p;
    }
}
</code></pre><pre><code>// UnderlinePen.java: UnderlinePen类
import framework.*;

public class UnderlinePen implements Product{
    private char ulchar;
    public UnderlineCharPen(char ulchar){
        this.ulchar = ulchar;
    }
    public void use(String s){
        int length = s.getBytes().length;
        System.out.println(s);
        for(int i=0;i&lt;length;i++){
            System.out.print(ulchar);
        }
        System.out.println(&quot;&quot;);
    }
    public Product createClone(){
        Product p=null;
        try{
            p=(Product)clone();
        }catch(CloneNotSupportedException e){
            e.printStackTrace();
        }
        return p;
    }
}
</code></pre><pre><code>// Main.java
import framework.*
public class Main{
    public static void main(String[] args){
        Manager manager = new Manager();
        UnderlinePen upen = new UnderlinePen(&#39;~&#39;);
        MessageBox mbox = new MessageBox(&#39;*&#39;);
        MessageBox sbox = new MessageBox(&#39;/&#39;);

        manager.register(&quot;strong message&quot;, upen);
        manager.register(&quot;warning box&quot;, mbox);
        manager.register(&quot;slash box&quot;, sbox);
        //将prototype储存起来

        Product p1 = manager.create(&quot;strong message&quot;);
        p1.use(&quot;Hello World&quot;);
        Product p2 = manager.create(&quot;warning box&quot;);
        p2.use(&quot;Hello World&quot;);
        Product p3 = manager.create(&quot;slash box&quot;);
        p3.use(&quot;Hello World&quot;);
    }
}
</code></pre><h2 id="登场角色"><a href="#登场角色" class="headerlink" title="登场角色"></a>登场角色</h2><ol>
<li>Prototype:由Product接口扮演，负责定义<strong>复制现有实例来生成新实例的方法</strong></li>
<li>ConcretePrototype:由MessageBox类和UnderlinePen类扮演，负责实现<strong>复制现有实例来生成新实例的方法</strong></li>
<li>Client:由Manager类扮演，负责使用<strong>复制现有实例来生成新实例的方法</strong>来生成新的实例</li>
</ol>
<p>不难看出，Prototype模式的核心思想时非常朴素的：有一些实例通过类名声明起来很困难？那么我们只需要将这些实例，每一个实例都保存一个Prototype，等到需要声明他们的时候直接根据这些已经保存的Prototype就可以很方便的生成新的实例。</p>
<p>回顾本章开头，在上述示例中其实我们模拟了<strong>对象种类繁多以至于无法将他们整合到一个类</strong>的这种情况，在示例程序我们一共生成了3种prototype，当然在实际的工程应用中我们可以创造更多的prototype。而试想如果我们为了每一个prototype都去编写一个类，那么类的数量将会非常庞大。同时注意，我们使用了这样的设计模式，也带来了低耦合性的好处，在Manager类的create方法中，我们没有使用类名，取而代之的使用字符串为生成的实例命名，通过这样的方式，框架和类名之间的耦合关系就被解开了。</p>
<blockquote>
<p>耦合性与类的使用： 在代码中使用类的名字时非常普遍的（这不是废话吗！），但是一旦在代码中出现要使用的类的名字，这段代码就无法与这个类分开，也就无法实现复用。当多个类必须紧密结合的时候，代码中出现这些类的名字是没有问题的，但是如果那些需要被独立出来作为组件复用的类的名字出现在代码中的时候，就可能引起麻烦。在每一个类的使用的时候，我们也不妨谨慎的去思考一下，是否存在更好的方法呢？</p>
</blockquote>
<h1 id="Chapter-7-Builder模式–组装复杂的实例"><a href="#Chapter-7-Builder模式–组装复杂的实例" class="headerlink" title="Chapter 7: Builder模式–组装复杂的实例"></a>Chapter 7: Builder模式–组装复杂的实例</h1><p>这一章节中要学习的是<strong>用于组装具有复杂结构实例的Builder模式</strong>。</p>
<blockquote>
<p>例：我们希望设计一段文档，使编写出的文档具有{一个标题+几个字符串+条目项目}的结构，我们在抽象的Builder类中声明抽象方法，然后Director类使用Builder类中的方法去编写一个具体的文档，而Builder类的子类（TextBuilder类/HTMLBuilder类）决定了用来编写文档的具体处理，也就是说，Director类使用TextBuilder类时可以编写纯文本文档，而使用HTMLBuilder类时可以编写HTML文档。</p>
</blockquote>
<pre><code>// Builder.java: Builder类是一个声明了编写文档的方法的抽象类，含有编写文档所需要的方法
public abstract class Builder{
    public abstract void makeTitle(String title);
    public abstract void makeString(String str);
    public abstract void makeItems(String[] items);
    public abstract void close();
}
</code></pre><pre><code>// Director.java: Director类使用Builder类中的方法来编写文档
public class Director{
    private Builder builder;
    public Director(Builder builder){
        this.builder = builder;
    }
    public void construct(){
        builder.makeTitle(&quot;This is a title&quot;);
        builder.makeString(&quot;This is the string&quot;);
        builder.makeItems(new String[]{&quot;Item1&quot;, &quot;Item2&quot;});
        builder.makeString(&quot;This is another string&quot;);
        builder.makeItems(new String[]{&quot;Item3&quot;, &quot;Item4&quot;});
        builder.close();
    }
}
// 注意，在Director.java中，我们定义了一个复杂的流程（组装了一个复杂的结构），但是对于Builder来说，不管是TextBuilder还是HTMLBuilder，这这个流程都是相同的（定义在Director.java之中）
</code></pre><pre><code>// TextBuilder.java
public class TextBuilder extends Builder{
    private StringBuffer buffer = new StringBuffer();
    public void makeTitle(String title){
        buffer.append(&quot;==================\n&quot;);
        buffer.append(&quot;+&quot;+titile+&quot;+\n&quot;);
        buffer.append(&quot;\n&quot;);
    }
    public void makeString(String str){
        buffer.append(str+&quot;\n&quot;);
        buffer.append(&quot;\n&quot;);
    }
    public void makeItems(String[] items){
        for(int i=0;i&lt;items.length;i++){
            buffer.append(&quot;-&gt;&quot;+items[i]+&quot;\n&quot;);
        }
        buffer.append(&quot;\n&quot;);
    }
    public void close(){
        buffer.append(&quot;==================\n&quot;);
    }
    public String getResult(){
        return buffer.toString();
    }
}
</code></pre><pre><code>// HTMLBuilder.java
import java.io.*;

public class HTMLBuilder extends Builder{
    private String filename;
    private PrintWriter writer;
    public void makeTitle(String title){
        filename = title+&quot;.html&quot;;
        try{
            writer = new PrinterWriter(new FileWriter(filename));
        }catch(IOException e){
            e.printStackTrace();
        }
        writer.println(&quot;&lt;html&gt;&lt;head&gt;&lt;title&gt;&quot;+title+&quot;&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&quot;);
        writer.println(&quot;&lt;hl&gt;&quot;+title+&quot;&lt;/hl&gt;&quot;);
    }
    public void makeString(String str){
        writer.println(&quot;&lt;p&gt;&quot;+str+&quot;&lt;/p&gt;&quot;);
    }
    public void makeItems(String[] items){
        writer.println(&quot;&lt;ul&gt;&quot;);
        for(int i=0;i&lt;items.length;i++){
            writer.println(&quot;&lt;li&gt;&quot;+items[i]+&quot;&lt;li&gt;&quot;);
        }
        writer.println(&quot;&lt;/ul&gt;&quot;);
    }
    public void close(){
        writer.println(&quot;&lt;/body&gt;&lt;/html&gt;&quot;);
        writer.close();
    }
    public String getResult(){
        return filename;
    }
}
</code></pre><blockquote>
<p>注意这里，TextBuilder的getResult会返回编写好的文本的全部内容，而HTMLBuilder会返回编写好的html文档标题</p>
</blockquote>
<pre><code>// Main.java
public class Main{
    public static void main(String[] args){
        if(args.length!=1){
            usage();
            System.exit(0);
        }
        if(args[0].equals(&quot;plain&quot;)){
            TextBuilder textbuilder = new TextBuilder();
            Director director = new Director(textBuilder);
            director.construct();
            String result = textbuilder.getResult();
            System.out.println(result);
        }else if(args[0]/equals(&quot;html&quot;)){
            HTMLBuilder htmlbuilder = new HTMLBuilder();
            Director director = new Director(htmlbuilder);
            director.construct();
            String result = htmlbuilder.getResult();
            System.out.println(result+&quot;HTML file has been compiled&quot;);
        }else{
            usage();
            System.exit(0);
        }
    }
    public static void usage(){
        System.out.println(&quot;Usage: java Main plain   ---   compiled a text file&quot;);
        System.out.println(&quot;Usage: java Main html   ---   compiled a html file&quot;);
    }
}
</code></pre><h2 id="登场角色-1"><a href="#登场角色-1" class="headerlink" title="登场角色"></a>登场角色</h2><ol>
<li>Builder:由Builder类扮演此角色，声明了准备用于实例的抽象方法</li>
<li>ConcreteBuilder：由TextBuilder类/HTMLBuilder类扮演此角色，定义了实例实际的方法</li>
<li>Director：由Director类扮演此角色，负责使用Builder角色的接口来生成实例，而不依赖于ConcreteBuilder，同时为了达到这一目的，它只调用Builder角色中被定义的方法</li>
<li>Client：由Main类扮演此角色，使用Builder模式</li>
</ol>
<p>注意，在本例子中，Main类并不知道Builder类，只是调用Director类的construct()。而Director类知道Builder类，调用Builder类的方法来编写文档，却不知道真正使用的是TextBuilder类还是HTMLBuilder类。正是因为不知道所以才能够相互替换，而相互替换就可以增强组件的复用性，具有更高的价值。</p>
<h1 id="Chapter-8-Abstract-Factory模式—将关联零件组装成产品"><a href="#Chapter-8-Abstract-Factory模式—将关联零件组装成产品" class="headerlink" title="Chapter 8: Abstract Factory模式—将关联零件组装成产品"></a>Chapter 8: Abstract Factory模式—将关联零件组装成产品</h1><p>众所周知，Factory是将零件组成产品的地方，而在这一章节我们要讨论的Abstract Factory则是将抽象零件组装成抽象产品的地方。对于抽象工厂来说，它不关心零件的具体实现，只关心接口，我们进使用该接口将零件组装成为产品。</p>
<p>在Template Method和Builder模式中，子类负责方法的具体实现，这一点在Abstract Factory模式中也是一样的。</p>
<blockquote>
<p>例：我们希望设计一个程序，可以将带有层次关系的连接的集合制作成HTML文件。程序的结构如下所示</p>
</blockquote>
<img src="/2020/02/01/Design-Pattern-设计模式-Part-III/2.png">
<pre><code>// Item.java: Item类
package factory
public abstract class Item{
    protected String caption;
    public Item(String caption){
        this.caption = caption;
    }
    public abstract String makeHTML();
}
// 是Link类和Tray类的父类
</code></pre><pre><code>// Link.java: Link类
// 抽象的零件之一：表示一对链接名称和url，如caption=&quot;百度&quot;，url=&quot;www.baidu.com&quot;
package factory;
public abstract class Link extends Item{
    protected String url;
    public Link(String caption, String url){
        super(caption);
        this.url = url;
    }
}
// 注意这里，因为Link类没有实现Item类中的抽象的makeHTML()，所以Link类依然是一个抽象类
</code></pre><pre><code>// ListLink.java: ListLink类，必须实现父类中声明的makeHTML()
package listfactory;
import factory.*;

public class ListLink extends Link{
    public ListLink(String caption, String url){
        super(caption, url);
    }
    public String makeHTML(){
        return &quot;&lt;li&gt;&lt;a href=\&quot;&quot;+url+&quot;\&quot;&gt;&quot;+caption+&quot;&lt;/a&gt;&lt;/li&gt;\n&quot;;
    }
}
</code></pre><pre><code>// Tray.java: Tray类
// 抽象的零件之二：是一个含有多个Link类和Tray类的容器，如实例化一个Tray（当然了抽象类不能实例化变量，这里仅仅是为了让解释更简明扼要）并使其caption=&quot;搜索引擎&quot;，那么这个Tray下可以含有若干个Tray（如&quot;国内搜索引擎/国外搜索引擎&quot;等），也可以含有若干个Link（如&quot;百度/搜狗&quot;等）
package factory
import java.util.ArrayList;

public abstract class Tray extends Item{
    protected ArrayList tray = new ArrayList();
    public Tray(String caption){
        super(caption);
    }
    public void add(Item item){
        tray.add(item);
    }
}
</code></pre><pre><code>//ListTray.java: 如同ListLink一样，ListTray也必须提供一个makeHTML()的实现
package listfactory;
import factory.*;
import java.util.Iterator;

public class ListTray extends Tray{
    public ListTray(String caption){
        super(caption);
    }
    public String makeHTML(){
        StringBuffer buffer = new StringBuffer();
        buffer.append(&quot;&lt;li&gt;\n&quot;);
        buffer.append(caption+&quot;\n&quot;);
        buffer.append(&quot;&lt;ul&gt;\n&quot;);

        Iterator it = tray.iterator();
        // 注意，tray是在父类Tray.java中定义的

        while(it.hasNext()){
            Item item = (Item)it.next();
            buffer.append(item.makeHTML());
        }

        buffer.append(&quot;&lt;/ul&gt;\n&quot;);
        buffer.append(&quot;&lt;/li&gt;\n&quot;);
        return buffer.toString();
    }
}
</code></pre><blockquote>
<p>这里我们可以看到，ListTray.java这一部分的程序其实是很多个章节以来最能体现面向对象编程这一思想的程序。在while循环中，我们不关心每个Item的实例究竟是ListTray还是ListLink，我们只调用了item.makeHTML()，具体item进行了什么样的处理也只有实例才知道，这就是面向对象编程的优点。</p>
</blockquote>
<pre><code>// Page.java: Page类
// 由抽象的零件组成的抽象的产品
package factory;
import java.io.*;
import java.util.ArrayList;

public abstract class Page{
    protected String title;
    protected String author;
    protected ArrayList content = new ArrayList();
    public Page(String title, String author){
        this.title = title;
        this.author = author;
    }
    public void add(Item item){
        content.add(item);
    }
    public void output(){
        try{
            String filename = title+&quot;.html&quot;;
            Writer writer = new FileWriter(filename);
            writer.write(this.makeHTML());
            writer.close();
            System.out.println(filename+&quot;COMPILED FINISHED&quot;);
        }catch(IOException e){
            e.printStackTrace();
        }
    }
    public abstract String makeHTML();
}
</code></pre><pre><code>// ListPage.java: 具体的产品
package listfactory;
import factory.*;
iport java.util.Iterator;

public class ListPage extends Page{
    public ListPage(String title, String author){
        super(title, author);
    }
    public String makeHTML(){
        StringBuffer buffer = new StringBuffer();
        buffer.append(&quot;&lt;html&gt;&lt;head&gt;&lt;title&gt;&quot;+title+&quot;&lt;/title&gt;&lt;/head&gt;\n&quot;);
        buffer.append(&quot;&lt;body&gt;\n&quot;);
        buffer.append(&quot;&lt;h1&gt;&quot;+title+&quot;&lt;/h1&gt;\n&quot;);
        buffer.append(&quot;&lt;ul&gt;\n&quot;);

        Iterator it = content.iterator();

        while(it.hasNext){
            Item item = (Item)it.next();
            buffer.append(item.makeHTML());
        }

        buffer.append(&quot;&lt;/ul&gt;\n&quot;);
        buffer.append(&quot;&lt;hr&gt;&lt;address&gt;&quot;+author+&quot;&lt;/hr&gt;&lt;/address&gt;&quot;);
        buffer.append(&quot;&lt;/body&gt;&lt;/html&gt;\n&quot;);

        return buffer.toString();
    }
}
</code></pre><pre><code>// Factory.java
// 抽象的工厂
package factory

public abstract class Factory{
    public static Factory getFactory(String classname){
        Factory factory = null;
        try{
            factory = (Factory)Class.forName(classname).newInstance();
            // getFactory()通过调用Class类的forname方法来动态的读取类信息，接着使用newInstance()生成实例并返回给调用者
            // 我们使用这个程序的时候要使用 java Main listfactory.ListFactory的命令，listfactory.ListFactory会作为类的名称（也就是这里的classname）传递给getFactory()
        }catch(ClassNotFoundException e){
            System.err.println(&quot;CANNOT FIND CLASS: &quot;+classname);
        }catch(Exception e){
            e.printStackTrace();
        }
        return factory;
    }

    public abstract Link createLink(String caption, String url);
    public abstract Tray createTray(String caption);
    public abstract Page createPage(String title, String author);
}
</code></pre><pre><code>// ListFactory.java: ListFactory类，实现了Factory抽象类的createLink()/createTray()/createPage()
package listfactory;
import factory.*;

public class ListFactory extends Factory{
    public Link createLink(String caption, String url){
        return new ListLink(caption, url);
    }
    public Tray createTray(String caption){
        return new ListTray(caption);
    }
    public Page createPage(String title, String author){
        return new ListPage(title, author); 
    }
}
</code></pre><pre><code>// Main.java
import factory.*;
public class Main{
    public static void main(String[] args){
        if(args.length!=1){
            System.out.println(&quot;UsageL java Main class.name.of.ConcreteFactory&quot;);
            System.out.println(&quot;Example 1: java Main listfactory.ListFactory&quot;);
            System.out.println(&quot;Example 2: java Main tablefactory.TableFactory&quot;);
            System.exit(0);
        }

        Factory factory = Factory.getFactory(args[0]);
        Link peopleNews = factory.createLink(&quot;人民日报&quot;, &quot;http://www.people.com.cn/&quot;);
        Link peopleNews2 = factory.createLink(&quot;人民日报2&quot;, &quot;http://www.people2.com.cn/&quot;);

        Link us_yahoo = factory.createLink(&quot;Yahoo_US&quot;, &quot;http://www.yahoo.com&quot;);
        Link jp_yahoo = factory.createLink(&quot;Yahoo_JP&quot;, &quot;http://www.yahoo.co.jp/&quot;);
        Link excite  = factory.createLink(&quot;Excite&quot;, &quot;http://www.excite.com/&quot;);
        Link google = factory.createLink(&quot;Google&quot;, &quot;http://www/google.com/&quot;);

        Tray traynews = factory.createTray(&quot;NEWS&quot;);
        traynews.add(peopleNews);
        traynews.add(peopleNews2);

        Tray trayyahoo = factory.createTray(&quot;Yahoo!&quot;);
        trayyahoo.add(us_yahoo);
        trayyahoo.add(jp_yahoo);

        Tray traysearch = factory.createTray(&quot;SearchEngine&quot;);
        traysearch.add(trayyahoo);
        traysearch.add(excite);
        traysearch.add(google);

        Page page = factory.createPage(&quot;LinkPage&quot;, &quot;John Doe&quot;);
        page.add(traynews);
        page.add(traysearch);
        page.output();
    }
}
</code></pre><h2 id="扮演角色"><a href="#扮演角色" class="headerlink" title="扮演角色"></a>扮演角色</h2><ol>
<li>AbstractProduct：由Link类/Tray类/Page类扮演此角色，负责定义AbstractFactory角色所生产的抽象零件和产品的接口</li>
<li>AbstractFactory：由Factory类扮演此角色，负责定义用于生产抽象产品的接口，如createLink()/createTray()/createPage()</li>
<li>Client：由Main类扮演此角色，负责调用AbstractFactory角色和AbstractFactory角色的接口来进行工作，对于具体的Product和Factory一无所知</li>
<li>ConcreteProduct：由listfactory包中的ListLink类/ListTray类/ListPage类扮演此角色，负责实现AbstractProduct角色的接口</li>
<li>ConcreteFactory：由listfactory包中的ListFactory类扮演此角色，负责实现AbstractFactory角色的接口，也就是createLink()/createTray()/createPage()</li>
</ol>
<p>要点分析，这里我们花费了巨大的力气来使用这个Abstract Factory模式，就是将Factory的概念抽象起来。在Abstract Factory中增加具体的工厂是非常容易的，只需要编写一个新的newlistfactory包，实现AbstractProduct角色和AbstractFactory的角色的接口即可。但是同时我们也需要注意一点，那就是如果我们想要在Abstract Factory中增加新的零件（如我们希望增加表示图像的Picture组件，那么我们在listfactory包中，我们需要在ListFactory中加入createPicture()，同时我们还需要在此包中增加一个ListPicture类。而同时我们也应该在factory包中增加一个Picture类表示新的零件）。</p>

        
    

    
</div>


                

                <!-- Post Comments -->
                
                    
                
            </div>

            <!-- Post Prev & Next Nav -->
            <nav class="material-nav mdl-color-text--grey-50 mdl-cell mdl-cell--12-col">
    <!-- Prev Nav -->
    
        <a href="/2020/02/01/Design-Pattern-设计模式-A-Short-Break/" id="post_nav-newer" class="prev-content">
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_back</i>
            </button>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            Newer
        </a>
    

    <!-- Section Spacer -->
    <div class="section-spacer"></div>

    <!-- Next Nav -->
    
        <a href="/2020/01/26/Design-Pattern-设计模式-Part-II/" id="post_nav-older" class="next-content">
            Older
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_forward</i>
            </button>
        </a>
    
</nav>

        </div>
    </div>



                    
                        <!-- Overlay For Active Sidebar -->
<div class="sidebar-overlay"></div>

<!-- Material sidebar -->
<aside id="sidebar" class="sidebar sidebar-colored sidebar-fixed-left" role="navigation">
    <div id="sidebar-main">
        <!-- Sidebar Header -->
        <div class="sidebar-header header-cover" style="background-image: url(/img/sidebarHeader.jpg);">
    <!-- Top bar -->
    <div class="top-bar"></div>

    <!-- Sidebar toggle button -->
    <button type="button" class="sidebar-toggle mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" style="display: initial;" data-upgraded=",MaterialButton,MaterialRipple">
        <i class="material-icons">clear_all</i>
        <span class="mdl-button__ripple-container">
            <span class="mdl-ripple">
            </span>
        </span>
    </button>

    <!-- Sidebar Avatar -->
    <div class="sidebar-image">
        <img src="/img/cesare.jpg" alt="Cesare (MINGJU LI)'s avatar">
    </div>

    <!-- Sidebar Email -->
    <a data-toggle="dropdown" class="sidebar-brand" href="#settings-dropdown">
        cesareli1995@gmail.com
        <b class="caret"></b>
    </a>
</div>


        <!-- Sidebar Navigation  -->
        <ul class="nav sidebar-nav">
    <!-- User dropdown  -->
    <li class="dropdown">
        <ul id="settings-dropdown" class="dropdown-menu">
            
                <li>
                    <a href="https://www.google.com/gmail/" target="_blank" title="Send Me An Email">
                        
                            <i class="material-icons sidebar-material-icons sidebar-indent-left1pc-element">email</i>
                        
                        Send Me An Email
                    </a>
                </li>
            
        </ul>
    </li>

    <!-- Homepage -->
    
        <li id="sidebar-first-li">
            <a href="/">
                
                    <i class="material-icons sidebar-material-icons">home</i>
                
                Home
            </a>
        </li>
        
    

    <!-- Archives  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">inbox</i>
                
                    Archives
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
            <li>
                <a class="sidebar_archives-link" href="/archives/2020/02/">February 2020<span class="sidebar_archives-count">11</span></a></li><li><a class="sidebar_archives-link" href="/archives/2020/01/">January 2020<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2019/05/">May 2019<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2019/01/">January 2019<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/12/">December 2018<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/11/">November 2018<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/10/">October 2018<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/06/">June 2018<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/05/">May 2018<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/04/">April 2018<span class="sidebar_archives-count">6</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/03/">March 2018<span class="sidebar_archives-count">7</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/01/">January 2018<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/12/">December 2017<span class="sidebar_archives-count">2</span></a>
            </ul>
        </li>
        
    

    <!-- Categories  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">chrome_reader_mode</i>
                
                Categories
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
                <li>
                
            </ul>
        </li>
        
    

    <!-- Pages  -->
    
        <li>
            <a href="/tags" title="Tags">
                
                    <i class="material-icons sidebar-material-icons">done</i>
                
                Tags
            </a>
        </li>
        
    

    <!-- Article Number  -->
    
        <li>
            <a href="/archives">
                Number of articles
                <span class="sidebar-badge">41</span>
            </a>
        </li>
        
    
</ul>


        <!-- Sidebar Footer -->
        <!--
I'm glad you use this theme, the development is no so easy, I hope you can keep the copyright, I will thank you so much.
If you still want to delete the copyrights, could you still retain the first one? Which namely "Theme Material"
It will not impact the appearance and can give developers a lot of support :)

很高兴您使用并喜欢该主题，开发不易 十分谢谢与希望您可以保留一下版权声明。
如果您仍然想删除的话 能否只保留第一项呢？即 "Theme Material"
它不会影响美观并可以给开发者很大的支持和动力。 :)
-->

<!-- Sidebar Divider -->


<!-- Theme Material -->


<!-- Help & Support -->
<!--

-->

<!-- Feedback -->
<!--

-->

<!-- About Theme -->
<!--

-->

    </div>

    <!-- Sidebar Image -->
    

</aside>

                    

                    
                        <!-- Footer Top Button -->
                        <div id="back-to-top" class="toTop-wrap">
    <a href="#top" class="toTop">
        <i class="material-icons footer_top-i">expand_less</i>
    </a>
</div>

                    

                    <!--Footer-->
<footer class="mdl-mini-footer" id="bottom">
    
        <!-- Paradox Footer Left Section -->
        <div class="mdl-mini-footer--left-section sns-list">
    <!-- Twitter -->
    

    <!-- Facebook -->
    
        <a href="https://www.facebook.com/cesare.lee.94" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-facebook">
                <span class="visuallyhidden">Facebook</span>
            </button><!--
     --></a>
    

    <!-- Google + -->
    

    <!-- Weibo -->
    
        <a href="https://www.weibo.com/5646481908/" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-weibo">
                <span class="visuallyhidden">Weibo</span>
            </button><!--
     --></a>
    

    <!-- Instagram -->
    
        <a href="https://www.instagram.com/cesaretiramisu/" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-instagram">
                <span class="visuallyhidden">Instagram</span>
            </button><!--
     --></a>
    

    <!-- Tumblr -->
    

    <!-- Github -->
    
        <a href="https://github.com/CesareMJLi" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-github">
                <span class="visuallyhidden">Github</span>
            </button><!--
     --></a>
    

    <!-- LinkedIn -->
    

    <!-- Zhihu -->
    

    <!-- Bilibili -->
    

    <!-- Telegram -->
    
    
    <!-- V2EX -->
    
</div>


        <!--Copyright-->
        <div id="copyright">
            Copyright&nbsp;©&nbsp;2017&nbsp;-<script type="text/javascript">var fd = new Date();document.write("&nbsp;" + fd.getFullYear() + "&nbsp;");</script>Cesare's Workshop
            
                <br>
                
                    Any question please contact me.
                
            
        </div>

        <!-- Paradox Footer Right Section -->

        <!--
        I am glad you use this theme, the development is no so easy, I hope you can keep the copyright.
        It will not impact the appearance and can give developers a lot of support :)

        很高兴您使用该主题，开发不易，希望您可以保留一下版权声明。
        它不会影响美观并可以给开发者很大的支持。 :)
        -->

        <div class="mdl-mini-footer--right-section">
            <div>
                <div class="footer-develop-div">Powered by <a href="https://hexo.io" target="_blank" class="footer-develop-a">Hexo</a></div>
                <div class="footer-develop-div">Theme - <a href="https://github.com/viosey/hexo-theme-material" target="_blank" class="footer-develop-a">Material</a></div>
            </div>
        </div>
    
</footer>


                    <!-- Import JS File -->

    <script>lsloader.load("lazyload_js","/js/lazyload.min.js?1BcfzuNXqV+ntF6gq+5X3Q==", true)</script>



    <script>lsloader.load("js_js","/js/js.min.js?V/53wGualMuiPM3xoetD5Q==", true)</script>



    <script>lsloader.load("np_js","/js/nprogress.js?pl3Qhb9lvqR1FlyLUna1Yw==", true)</script>


<script type="text/ls-javascript" id="NProgress-script">
    NProgress.configure({
        showSpinner: true
    });
    NProgress.start();
    $('#nprogress .bar').css({
        'background': '#29d'
    });
    $('#nprogress .peg').css({
        'box-shadow': '0 0 10px #29d, 0 0 15px #29d'
    });
    $('#nprogress .spinner-icon').css({
        'border-top-color': '#29d',
        'border-left-color': '#29d'
    });
    setTimeout(function() {
        NProgress.done();
        $('.fade').removeClass('out');
    }, 800);
</script>













<!-- UC Browser Compatible -->
<script>
	var agent = navigator.userAgent.toLowerCase();
	if(agent.indexOf('ucbrowser')>0) {
		document.write('<link rel="stylesheet" href="/css/uc.css">');
	   alert('由于 UC 浏览器使用极旧的内核，而本网站使用了一些新的特性。\n为了您能更好的浏览，推荐使用 Chrome 或 Firefox 浏览器。');
	}
</script>

<!-- Import prettify js  -->

    
        
            <script>lsloader.load("prettify_js","/js/prettify.min.js?WN07fivHQSMKWy7BmHBB6w==", true)</script>
        
    



<!-- Window Load -->
<!-- add class for prettify -->
<script type="text/ls-javascript" id="window-load">
    $(window).on('load', function() {
        // Post_Toc parent position fixed
        $('.post-toc-wrap').parent('.mdl-menu__container').css('position', 'fixed');
    });

    
        
            $(function() {
                $('pre').addClass('prettyprint linenums').attr('style', 'overflow:auto;');
                prettyPrint();
                })
        
    
    
</script>

<!-- MathJax Load-->


<!-- Bing Background -->


<script type="text/ls-javascript" id="lazy-load">
    // Offer LazyLoad
    queue.offer(function(){
        $('.lazy').lazyload({
            effect : 'show'
        });
    });

    // Start Queue
    $(document).ready(function(){
        setInterval(function(){
            queue.execNext();
        },200);
    });
</script>

<!-- Custom Footer -->



<script>
    (function(){
        var scriptList = document.querySelectorAll('script[type="text/ls-javascript"]')

        for (var i = 0; i < scriptList.length; ++i) {
            var item = scriptList[i];
            lsloader.runInlineScript(item.id,item.id);
        }
    })()
console.log('\n %c © Material Theme | Version: 1.5.2 | https://github.com/viosey/hexo-theme-material %c \n', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-left-radius:5px;border-bottom-left-radius:5px;', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-right-radius:5px;border-bottom-right-radius:5px;');
</script>

                </main>
            </div><!-- hexo-inject:begin --><!-- hexo-inject:end -->
        </body>
    
</html>
